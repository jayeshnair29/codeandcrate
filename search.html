---
layout: default
title: Search
---

<div class="row">

    <div class="col-sm-8">
        <div class="mainheading">
          <h1 class="posttitle">Search Results</h1>
        </div>
        
        <div id="searchResults" class="article-post">
          <p>Searching...</p>
        </div>
    </div>

    <div class="col-sm-4">
        {% include sidebar.html %}
    </div>

</div>


<script>
  // Simple Jekyll Search
  // https://github.com/karloespiritu/simple-jekyll-search

  (function() {
    const params = new URLSearchParams(window.location.search);
    const query = params.get('q');
    const searchResultsContainer = document.getElementById('searchResults');

    if (!query) {
      searchResultsContainer.innerHTML = '<p>Please enter a search term in the box to your right.</p>';
      return;
    }

    fetch('{{ site.baseurl }}/search.json')
      .then(response => response.json())
      .then(data => {
        const results = data.filter(post => {
          const title = post.title ? post.title.toLowerCase() : '';
          const content = post.content ? post.content.toLowerCase() : '';
          const lowerCaseQuery = query.toLowerCase();
          return title.includes(lowerCaseQuery) || content.includes(lowerCaseQuery);
        });

        searchResultsContainer.innerHTML = ''; 

        if (results.length > 0) {
          searchResultsContainer.innerHTML = `<h4 class="mb-4">Found ${results.length} result(s) for "${query}"</h4>`;
          const ul = document.createElement('ul');
          ul.className = 'list-unstyled';

          results.forEach(post => {
            const li = document.createElement('li');
            li.className = 'mb-4';
            li.innerHTML = `
              <h5><a href="${post.url}">${post.title}</a></h5>
              <p><small>${post.date}</small></p>
              <p>${post.content.substring(0, 150)}...</p>
            `;
            ul.appendChild(li);
          });
          searchResultsContainer.appendChild(ul);
        } else {
          searchResultsContainer.innerHTML = `<h4>No results found for "${query}"</h4><p>Please try a different search term.</p>`;
        }
      })
      .catch(error => {
        console.error('Error fetching search data:', error);
        searchResultsContainer.innerHTML = '<p>There was an error loading the search results. Please try again later.</p>';
      });
  })();
</script>
